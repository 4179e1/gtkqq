Jet().$package(qqweb.app.userDetails=new qqweb.businessClass.App(qqweb.portal.getSystemConfig("userDetails")),function(m){var x=m.dom,A=m.browser,v=m.event,B=this,o={},y=[],p,e,q={},g={},n,F={gender:{unknown:"-",male:"男",female:"女"},shengxiao:{"0":"-","1":"鼠","2":"牛","3":"虎","4":"兔","5":"龙","6":"蛇","7":"马","8":"羊","9":"猴","10":"鸡","11":"狗","12":"猪"},constel:{"0":"-","1":"水瓶座","2":"双鱼座","3":"白羊座","4":"金牛座","5":"双子座","6":"巨蟹座","7":"狮子座","8":"处女座","9":"天秤座","10":"天蝎座","11":"射手座","12":"摩羯座"},blood:{"0":"-","1":"A型","2":"B型","3":"O型","4":"AB型","5":"其它"},m2d:{1:31,3:31,5:31,7:31,8:31,10:31,12:31,2:28,4:30,6:30,9:30,11:30}};this.userSelData={gender:{name:"qqweb.app.userDetails.userSelData.gender",data:new Array(["unknown","-"],["male","男"],["female","女"])},shengxiao:{name:"qqweb.app.userDetails.userSelData.shengxiao",data:new Array(["0","-"],["1","鼠"],["2","牛"],["3","虎"],["4","兔"],["5","龙"],["6","蛇"],["7","马"],["8","羊"],["9","猴"],["10","鸡"],["11","狗"],["12","猪"])},constel:{name:"qqweb.app.userDetails.userSelData.constel",data:new Array(["0","-"],["1","水瓶座"],["2","双鱼座"],["3","白羊座"],["4","金牛座"],["5","双子座"],["6","巨蟹座"],["7","狮子座"],["8","处女座"],["9","天秤座"],["10","天蝎座"],["11","射手座"],["12","摩羯座"])},blood:{name:"qqweb.app.userDetails.userSelData.blood",data:new Array(["0","-"],["1","A型"],["2","B型"],["3","O型"],["4","AB型"],["5","其它"])}};var f=function(J){var I=J.charCode||0;m.out("charCode:"+I);if((I<48||I>57)&&J.keyCode!=8){J.preventDefault();}};var w=function(K){var J=q.birthyear.value;var I=(new Date()).getFullYear();if(J==""){}else{if(J<1890||J>I){alert("修改资料失败，请输入合适年份后提交。");return false;}}};var H=function(K,L,I){if(L==""||I==""){alert("资料不完整，请提供出生月日后提交。");return false;}var J=(new Date()).getFullYear();if(K==""){}else{if(K<1890||K>J){alert("修改资料失败，请输入合适年份后提交。");return false;}}if(!F.m2d[L]){alert("修改资料失败，请输入有效月日信息后提交。");return false;}F.m2d[2]+=(K%4)?0:1;if(I>F.m2d[L]){alert("修改资料失败，请输入有效月日信息后提交。");return false;}return true;};var i=function(I){if(I!==""&&!m.string.isEmail(String(I))){alert("邮箱地址不正确！");return false;}return true;};var d=function(I){return i(this.value);};var j=function(){c(this,24);};var D=function(){c(this,20);};var l=function(){c(this,20);};var r=function(){c(this,255);};var c=function(L,J){var I=String(L.value);var K=m.string.byteLength(I);if(K>J){L.value=m.string.cutRight(I,1);c(L,J);}};var G=function(){q.nick=x.id("myDetails_nick");q.gender=x.id("myDetails_gender");q.shengxiao=x.id("myDetails_shengxiao");q.constel=x.id("myDetails_constel");q.blood=x.id("myDetails_blood");q.birthyear=x.id("myDetails_birthyear");q.birthmonth=x.id("myDetails_birthmonth");q.birthday=x.id("myDetails_birthday");q.phone=x.id("myDetails_phone");q.mobile=x.id("myDetails_mobile");q.email=x.id("myDetails_email");q.occupation=x.id("myDetails_occupation");q.college=x.id("myDetails_college");q.homepage=x.id("myDetails_homepage");q.personal=x.id("myDetails_personal");for(var I in q){q[I].value=m.string.trim(String(q[I].value));}if(!u(q.birthyear.value)){alert("出生年含有不允许的字符！");return false;}else{if(!u(q.birthmonth.value)){alert("出生月含有不允许的字符！");return false;}else{if(!u(q.birthday.value)){alert("出生日含有不允许的字符！");return false;}else{if(!u(q.phone.value)){alert("电话含有不允许的字符！");return false;}else{if(!z(q.mobile.value)){return false;}else{if(!H(q.birthyear.value,q.birthmonth.value,q.birthday.value)){return false;}else{if(!i(q.email.value)){return false;}}}}}}}return true;};var z=function(K){if(K==""||K=="-"){return true;}if(!u(K)){alert("手机号码含有不允许的字符！");return false;}else{if(K.length!=11&&K.length!=10){alert("手机号码长度不符合要求，请检查后再试！");return false;}}var J=K.substr(0,2);if(J!=13&&J!=15&&J!=18){var I=K.substr(0,3);if(I==852||I==853){return true;}else{alert("手机号码不符合要求，请检查后再试！");return false;}}return true;};var u=function(I){I=String(I);if(I!==""&&I!=="-"){if(!m.string.isNumber(I)){if(!m.string.isNumber(I.substr(0,3))){return false;}else{for(var J=3;J<I.length;++J){if(I.charAt(J)!="*"){return false;}return true;}}}else{return true;}}else{return true;}};var s=function(K,I){var J={};m.extend(J,K);if(I){J.birthyear=K.birthday.year==0?"":K.birthday.year;J.birthmonth=K.birthday.month==0?"":K.birthday.month;J.birthday=K.birthday.day==0?"":K.birthday.day;}else{J.birthyear=K.birthday.year==0?"-":K.birthday.year;J.birthmonth=K.birthday.month==0?"-":K.birthday.month;J.birthday=K.birthday.day==0?"-":K.birthday.day;}J.gender=F.gender[K.gender];J.shengxiao=F.shengxiao[K.shengxiao];J.constel=F.constel[K.constel];J.blood=F.blood[K.blood];J.showName=K.nick;J.allName=K.nick;return J;};var C=function(K){var I={};for(var J in K){I[J]=m.string.encodeHtml(String(K[J]));}return I;};var b=function(K){var I={};for(var J in K){I[J]=m.string.encodeHtmlAttribute(String(K[J]));}return I;};var h=function(P){e=P;var M=P.uin;var N=B.getWindow(M);if(N&&(M===N.uin)){var O=s(P,1);var I=b(O);N.setTitleHtml("我的资料");N.data.userDetails_name.innerHTML='<input id="myDetails_nick" value="'+m.string.encodeHtml(String(P.nick))+'" />';var L='<div class="myDetails_basicList">        <dl class="userDetails_basicList">          <dt class="dItem_s">性别:</dt>          <dt class="dItem_s">生肖:</dt>          <dt class="dItem_s_r">星座:</dt>          <dt class="dItem_s_r">血型:</dt>          <dd class="dItem_s">            <div id="d_myDetails_gender"></div>          </dd>          <dd class="dItem_s">            <div id="d_myDetails_shengxiao">            </div>          </dd>          <dd  class="dItem_s_r">            <div id="d_myDetails_constel">            </div>          </dd>          <dd class="dItem_s_r">            <div id="d_myDetails_blood">            </div>          </dd>          <dt class="dItem_l">生日:</dt>          <dt class="dItem_s_r">电话:</dt>          <dt class="dItem_s_r">手机:</dt>          <dd class="dItem_l">            <input id="myDetails_birthyear" class="userDetails_birthyear" value="<%=birthyear%>" maxLength="4" />            <div class="userDetails_text">年</div>            <input id="myDetails_birthmonth" class="userDetails_birthmonth" value="<%=birthmonth%>" maxLength="2" />            <div class="userDetails_text">月</div>            <input id="myDetails_birthday" class="userDetails_birthday" value="<%=birthday%>" maxLength="2" />            <div class="userDetails_text">日</div>          </dd>          <dd class="dItem_s_r"><input id="myDetails_phone" value="<%=phone%>" maxLength="20" /></dd>          <dd class="dItem_s_r"><input id="myDetails_mobile" value="<%=mobile%>" maxLength="12" /></dd>          <dt class="dItem_l">国家/地区:</dt>          <dt class="dItem_s_r">省份:</dt>          <dt class="dItem_s_r">城市:</dt>          <dd class="dItem_l"><input type="text" disabled="disabled" value="<%=country%>"/></dd>          <dd class="dItem_s_r"><input type="text" disabled="disabled" value="<%=province%>"/></dd>          <dd class="dItem_s_r"><input type="text" disabled="disabled" value="<%=city%>"/></dd>          <dt class="dItem_l">邮箱:</dt>          <dt class="dItem_l_r">职业:</dt>          <dd class="dItem_l"><input id="myDetails_email" value="<%=email%>" maxLength="30" /></dd>          <dd class="dItem_l_r"><input id="myDetails_occupation" value="<%=occupation%>" /></dd>          <dt class="dItem_l">毕业院校:</dt>          <dt class="dItem_l_r">个人主页:</dt>          <dd class="dItem_l"><input id="myDetails_college" value="<%=college%>" /></dd>          <dd class="dItem_l_r"><input id="myDetails_homepage" value="<%=homepage%>" maxLength="50" /></dd>          <dt class="dItem_l">个人说明:</dt>          <dd class="userDetails_superbig_my"><textarea id="myDetails_personal"><%=personal%></textarea></dd>        </dl></div>      ';var K=m.string.template(L,I);N.data.userDetails_basicInfo_body.innerHTML=K;q.nick=x.id("myDetails_nick");q.gender=x.id("myDetails_gender");q.shengxiao=x.id("myDetails_shengxiao");q.constel=x.id("myDetails_constel");q.blood=x.id("myDetails_blood");q.birthyear=x.id("myDetails_birthyear");q.birthmonth=x.id("myDetails_birthmonth");q.birthday=x.id("myDetails_birthday");q.phone=x.id("myDetails_phone");q.mobile=x.id("myDetails_mobile");q.email=x.id("myDetails_email");q.occupation=x.id("myDetails_occupation");q.college=x.id("myDetails_college");q.homepage=x.id("myDetails_homepage");q.personal=x.id("myDetails_personal");v.on(q.birthyear,"keypress",f);v.on(q.birthmonth,"keypress",f);v.on(q.birthday,"keypress",f);v.on(q.phone,"keypress",f);v.on(q.mobile,"keypress",f);v.on(q.birthyear,"blur",w);v.on(q.nick,"keyup",j);v.on(q.occupation,"keyup",D);v.on(q.college,"keyup",l);v.on(q.personal,"keyup",r);v.on(q.email,"blur",d);P.gender=P.gender||"";var J=new qqweb.app.userDetails.divSelect("d_myDetails_gender","myDetails_gender",qqweb.app.userDetails.userSelData.gender,P.gender,110);P.shengxiao=P.shengxiao||"";J=new qqweb.app.userDetails.divSelect("d_myDetails_shengxiao","myDetails_shengxiao",qqweb.app.userDetails.userSelData.shengxiao,P.shengxiao,110);P.constel=P.constel||"";J=new qqweb.app.userDetails.divSelect("d_myDetails_constel","myDetails_constel",qqweb.app.userDetails.userSelData.constel,P.constel,110);P.blood=P.blood||"";J=new qqweb.app.userDetails.divSelect("d_myDetails_blood","myDetails_blood",qqweb.app.userDetails.userSelData.blood,P.blood,110);v.addObserver(N,"clickOkButton",t.onOkButtonClick);v.addObserver(qqweb.rpcService,"ModifyMyDetailsSuccess",t.onModifyMyDetailsSuccess);v.addObserver(qqweb.rpcService,"ModifyMyDetailsError",t.onModifyMyDetailsError);}};var a=function(){for(var I in q){if(I=="birthmonth"||I=="birthday"||I=="birthyear"){g[I]=q[I].value||0;}else{g[I]=q[I].value;}}qqweb.rpcService.sendModifyMyDetails(g);};var k=function(K){var I=K.uin;var J=B.getWindow(I);if(J.data.userDetails_account){x.show(J.data.userDetails_account);}if(J.data.userDetails_qquin){x.hide(J.data.userDetails_qquin);}J.data.userDetails_account.innerHTML="<"+K.account+">";};var E=function(O){var L=O.uin;var M=B.getWindow(L);if(M&&(L===M.uin)){var N=s(O);var I=C(N);M.setTitleHtml(I.allName+" 的资料");M.data.userDetails_name.innerHTML=I.showName;var K='        <dl class="userDetails_basicList">          <dt>性　　别:</dt>          <dd class="userDetails_small"><%=gender%></dd>          <dt>生　　肖:</dt>          <dd class="userDetails_small"><%=shengxiao%></dd>          <dt>星　　座:</dt>          <dd class="userDetails_small"><%=constel%></dd>          <dt>血　　型:</dt>          <dd class="userDetails_small"><%=blood%></dd>          <dt>生　　日:</dt>          <dd><%=birthyear%>年<%=birthmonth%>月<%=birthday%>日</dd>          <dt>国家/地区:</dt>          <dd><%=country%></dd>          <dt>省　　份:</dt>          <dd><%=province%></dd>          <dt>城　　市:</dt>          <dd><%=city%></dd>          <dt>电　　话:</dt>          <dd><%=phone%></dd>          <dt>手　　机:</dt>          <dd><%=mobile%></dd>          <dt>邮　　箱:</dt>          <dd><%=email%></dd>          <dt>职　　业:</dt>          <dd><%=occupation%></dd>          <dt>毕业院校:</dt>          <dd><%=college%></dd>          <dt>个人主页:</dt>          <dd><%=homepage%></dd>          <dt>个人说明:</dt>          <dd class="userDetails_superbig"><%=personal%></dd>        </dl>      ';var J=m.string.template(K,I);M.data.userDetails_basicInfo_body.innerHTML=J;}};var t={onRun:function(M){var J,N,I,K,Q;if(M.data){n=M.data.result;if(M.account){J=M.account;N=M.data;}else{J=M.uin;N=M.data;}n=N.result;}else{if(M.code){K=M.verifysession;I=M.code;J=M.uin;}else{J=M;}}var R=B.getWindow(J);if(R){}else{var S=J+" 的资料";B.setWindow(J,true);var L=407;var T=false;var V=false;var P=false;if(J==qqweb.portal.self.uin){P=true;L=465;T=true;V=true;}R=new qqweb.businessClass.Window({title:S,modeSwitch:false,dragProxy:qqweb.layout.getWindowDragProxy(),dragable:true,resize:false,width:560,height:L,hasCloseButton:true,hasOkButton:T,hasCancelButton:V});R.setTitle(S);v.addObserver(R,"close",t.onWdinwoClose);B.setWindow(J,R);var O='          <div class="userDetails_area">            <div class="userDetails_MainInfo"'+(P?"":' style="height: 65px;" ')+'>              <img id="userDetails_avatar_'+J+'" class="userDetails_avatar" src="./style/images/avatar_default_40_40.gif" />              <div class="userDetails_nameArea">                <div id="userDetails_name_'+J+'" class="userDetails_name">'+J+'</div>				<div id="userDetails_account_'+J+'" class="userDetails_account"></div>                <div id="userDetails_qqLevel_'+J+'" class="userDetails_qqLevel">...</div>				<a id="userDetails_qquin_'+J+'" class="userDetails_qquin" href="###" uin='+J+'>查看QQ号码</a>				<a id="userDetails_adder_'+J+'" class="userDetails_adder" href="###">加为好友</a>              </div>              <div class="userDetails_signatureArea" id="userDetails_signatureArea_'+J+'">个性签名: <span id="userDetails_signature_'+J+'">...</span></div>'+(P?'			  <div class="userDetails_changeAvatar"><a id="userDetails_changeAvatar_'+J+'" href="###" class="chageAvatar" style="display:none;">更换头像</a></div>':"")+'            </div>            <div class="userDetails_tabHeadArea">              <div id="userDetails_basicInfo_head_'+J+'">基本资料</div>              <div id="userDetails_qzone_head_'+J+'" style="display:none;">QQ空间</div>            </div>            <div class="userDetails_tabBodyArea">              <div id="userDetails_basicInfo_body_'+J+'">                <div class="loading">载入中...</div>              </div>              <div id="userDetails_qzone_body_'+J+'" style="display:none;">                <div class="loading">载入中...</div>              </div>            </div>          </div>        ';R.setHtml(O);R.data={userDetails_avatar:x.id("userDetails_avatar_"+J),userDetails_basicInfo_head:x.id("userDetails_basicInfo_head_"+J),userDetails_qzone_head:x.id("userDetails_qzone_head_"+J),userDetails_basicInfo_body:x.id("userDetails_basicInfo_body_"+J),userDetails_qzone_body:x.id("userDetails_qzone_body_"+J),userDetails_name:x.id("userDetails_name_"+J),userDetails_qquin:x.id("userDetails_qquin_"+J),userDetails_account:x.id("userDetails_account_"+J),userDetails_qqLevel:x.id("userDetails_qqLevel_"+J),userDetails_adder:x.id("userDetails_adder_"+J),userDetails_signature:x.id("userDetails_signature_"+J)};if(P&&qqweb.portal.getLoginLevel()==qqweb.CONST.LOGIN_LEVEL_ALL){var U=x.id("userDetails_changeAvatar_"+J);x.show(U);v.on(U,"click",t.onChangeAvatarBtnClick);x.setStyle(R.data.userDetails_avatar,"cursor","pointer");v.on(R.data.userDetails_avatar,"click",t.onChangeAvatarBtnClick);v.addObserver(qqweb.portal,"UserAvatarChanged",t.onUserAvatarChanged);}R.data.userDetails_avatar.src=qqweb.util.getUserAvatar(J,1)+"&t="+(new Date()).getTime();R.tab=new m.ui.Tab();R.tab.add({trigger:R.data.userDetails_basicInfo_head,sheet:R.data.userDetails_basicInfo_body});R.tab.config.triggerEvent="click";R.tab.config.slideEnabled=false;R.tab.init();v.addObserver(qqweb.rpcService,"GetUserInfoSuccess",t.onGetUserInfoSuccess);v.addObserver(qqweb.rpcService,"GetFriendUinSuccess",t.onGetFriendUinSuccess);v.addObserver(qqweb.rpcService,"GetQQLevelSuccess",t.onGetQQLevelSuccess);v.addObserver(qqweb.rpcService,"GetBuddySignatureSuccess",t.onGetBuddySignatureSuccess);v.on(R.data.userDetails_qquin,"click",t.onQQuinClick);v.on(R.data.userDetails_adder,"click",t.onAdderClick);if(J==qqweb.portal.self.uin||EQQ.Model.BuddyList.isBuddy(J)){x.hide(R.data.userDetails_adder);}else{x.show(R.data.userDetails_adder);v.on(R.data.userDetails_adder,"click",t.onAdderClick);}if(J==qqweb.portal.self.uin||EQQ.Model.BuddyList.isBuddy(J)){qqweb.rpcService.sendGetSignature(J);qqweb.rpcService.sendGetQQLevel(J);x.show(x.id("userDetails_signatureArea_"+J));x.show(x.id("userDetails_qqLevel_"+J));x.hide(x.id("userDetails_qquin_"+J));if(!N){qqweb.rpcService.sendGetUserInfo(J);}else{v.notifyObservers(qqweb.rpcService,"GetUserInfoSuccess",N);}}else{x.hide(x.id("userDetails_signatureArea_"+J));x.hide(x.id("userDetails_qqLevel_"+J));x.hide(x.id("userDetails_qquin_"+J));if(!N){qqweb.rpcService.sendGetUserInfo_with_code(J);}else{v.notifyObservers(qqweb.rpcService,"GetUserInfoSuccess",N);}}}},onAdderClick:function(J){var I={uin:n.uin,nick:n.nick,allow:n.allow,token:n.token};qqweb.portal.runApp("buddyAdder",I);},onWdinwoClose:function(I){B.closeWindow(I.uin);},onGetUserInfoSuccess:function(J){n=J.result;var K=J.result;var I=K.uin;if(K.uin==qqweb.portal.self.uin){h(K);}else{E(K);}if(K.account){}},onGetFriendUinSuccess:function(I){var J=I.result;k(J);},onQQuinClick:function(K){K.preventDefault();var J=K.currentTarget.getAttribute("uin");var I=1;qqweb.rpcService.sendGetFriendUin2(J,I);},onGetQQLevelSuccess:function(L){var Q=B.getWindow(L.arguments.uin);if(Q&&(L.arguments.uin===Q.uin)){var I=L.result.level;var R=parseInt(I/64),O=parseInt((I%64)/16),J=parseInt(((I%64)%16)/4),N=((I%64)%16)%4,M="";for(var K=0;K<R;K++){M+='<div class="qqLevel_queen"></div>';}for(var K=0;K<O;K++){M+='<div class="qqLevel_sun"></div>';}for(var K=0;K<J;K++){M+='<div class="qqLevel_moon"></div>';}for(var K=0;K<N;K++){M+='<div class="qqLevel_star"></div>';}if(Q.uin==qqweb.portal.self.uin){var P="距升级到"+(I+1)+"级还有"+L.result.remainDays+"天";M+='<span class="tips">'+P+"</span>";Q.data.userDetails_qqLevel.title=P;}Q.data.userDetails_qqLevel.innerHTML=M;}},onGetBuddySignatureSuccess:function(L){var K=B.getWindow(L.arguments.uin);if(K&&(L.arguments.uin===K.uin)){var I=L.result;var J;if(I.length===0){J="";}else{J=I[0].lnick;}K.data.userDetails_signature.innerHTML=m.string.encodeHtml(String(J));K.data.userDetails_signature.title=J;}},onChangeAvatarBtnClick:function(I){I.preventDefault();qqweb.portal.runApp("avatarChanger",{vipLevel:e.vip_info});pgvSendClick({hottag:"web2qq.changeicon.changeicon"});},onModifyMyDetailsSuccess:function(){var J=B.getWindow(qqweb.portal.self.uin);if(J&&(qqweb.portal.self.uin===J.uin)){J.close();x.id("EQQ_MyNick").title=m.string.encodeScript(g.nick)+"<"+qqweb.portal.self.uin+">";x.id("EQQ_MyNick").innerHTML=m.string.encodeHtml(String(g.nick));}var I={gender:g.gender,phone:g.phone,mobile:g.mobile,email:g.email};for(var K in I){qqweb.portal.setPortalSelfItem(K,I[K]);}},onModifyMyDetailsError:function(){alert("修改资料失败，请稍后重试");},onOkButtonClick:function(){if(G()){a();}return false;},onUserAvatarChanged:function(){var I=qqweb.portal.self.uin;var J=B.getWindow(I);if(J){J.data.userDetails_avatar.src=qqweb.util.getUserAvatar(I,1)+"&t="+(new Date()).getTime();}}};v.addObserver(this,"run",t.onRun);this.getWindow=function(I){return o[I];};this.setWindow=function(I,J){o[I]=J;y.push(J);J.uin=I;return J;};this.closeWindow=function(I){var J=o[I];m.array.remove(y,J);delete o[I];return true;};this.closeAllWindow=function(){for(var I=0;I<y.length;I++){this.closeWindow(y[I].uin);}return true;};this.createWindow=function(I){};this.divSelect=new m.Class({init:function(L,N,J,V,M){this._selectName=N;this._dataObj=J;this._selOption=V;var P=J.data;var T=document.getElementById(L);if(!T||typeof(T)==="undefined"){return false;}var W=document.createElement("div");if(isNaN(M)||M==""){M=150;}else{if(M<26){M=26;}}W.style.width=M;var S="";if(P.length>0){S+="<input type='hidden' name='"+N+"' id='"+N+"' value='"+this.relv(V,P)+"'>";S+="<div id='_a_"+N+"' style='width:"+M+"px;height:18px; border:1px #728EA4 solid;'>";S+="<div id='_v_"+N+"' style='position:relative;float:left;left:2px;width:"+(M-22)+"px;height:18px;font-size:12px;overflow:hidden;line-height:18px;'>"+this.reStr(P,V)+"</div>";S+="<div id='_arr_"+N+"' class='divSelect_arr' style='position:relative;float:right;right:0px;width:18px;height:18px;text-align:center;font-family:Webdings;font-size:16px;overflow:hidden;background-color:#FFF;cursor:pointer!important;cursor:hand;'></div>";S+="</div>";S+="<div id='_b_"+N+"' style='position:absolute; background-color:#FFFFFF; width:"+M+"px; height:"+this.height(P.length)+"px;border:1px #728EA4 solid;overflow-x:hidden;overflow-y:auto;display:none; z-index:99999;'>";for(var O=0;O<P.length;O++){var K=P[O][0]==V?this.style(2):this.style(1);S+="<div id='_s_"+N+O+"' style='"+K+"' >"+P[O][1]+"</div>";}S+="</div>";}else{S+="<input type='hidden' name='"+N+"' id='"+N+"' value='"+V+"'>";S+="<div id='_a_"+N+"' style='width:"+M+"px;height:18px; border:1px #728EA4 solid;'>";S+="<div id='_v_"+N+"' style='position:relative;float:left;left:2px;width:"+(M-22)+"px;height:18px;font-size:12px;overflow:hidden;line-height:18px;'></div>";S+="<div id='_arr_"+N+"' class='divSelect_arr' style='position:relative;float:right;right:0px;width:18px;height:18px;text-align:center;font-family:Webdings;font-size:16px;overflow:hidden;background-color:#FFF;cursor:pointer!important;cursor:hand;'></div>";S+="</div>";S+="<div id='_b_"+N+"' style='position:absolute; background-color:#FFFFFF; width:"+M+"px; height:"+this.height(0)+"px;border:1px #728EA4 solid;overflow-x:hidden;overflow-y:auto;display:none; z-index:99999;'></div>";}W.innerHTML=S;T.appendChild(W);var Q=this;var U=function(){Q.showOptions();};v.on(x.id("_v_"+N),"click",U);v.on(x.id("_arr_"+N),"click",U);if(P.length>0){var R=function(){Q.css(this,3);};var I=function(){Q.css(this,1);};var X=function(){Q.selected(this);};for(var O=0;O<P.length;O++){v.on(x.id("_s_"+N+O),"mouseover",R);v.on(x.id("_s_"+N+O),"mouseout",I);v.on(x.id("_s_"+N+O),"click",X);}}},value:function(I){return document.getElementById(I).value;},text:function(I){return document.getElementById("_v_"+I).innerText;},selected:function(J){var L=this._dataObj.data;var K=J.innerHTML;for(var I=0;I<L.length;I++){if(L[I][1]===K){x.id(this._selectName).value=L[I][0];}x.id("_s_"+this._selectName+I).style.cssText=this.style(1);}x.id("_v_"+this._selectName).innerHTML=K;J.style.cssText=this.style(2);this.hidden();},relv:function(I,K){for(var J=0;J<K.length;J++){if(K[J][0]==I){return I;}}if(I==null||I==""){return K[0][0];}},reStr:function(K,I){for(var J=0;J<K.length;J++){if(K[J][0]==I){return K[J][1];}}if(I==null||I==""){return K[0][1];}},height:function(I){var J;if(I>10||I<1){J=10*15;}else{J=I*15;}J+=2;return J;},showOptions:function(J){J=J||this._selectName;var I=document.getElementById("_b_"+J);if(I.style.display=="none"){I.style.display="";}else{I.style.display="none";}},hidden:function(){document.getElementById("_b_"+this._selectName).style.display="none";},style:function(I){var J="";switch(I){case 1:J="height:15px; font-size:12px; line-height:15px; overflow:hidden; background-color:#FFFFFF; color:#000000; font-weight:normal;";break;case 2:J="height:15px; font-size:12px; line-height:15px; overflow:hidden; background-color:#315DAD; color:#FFFFFF; font-weight:bold;";break;case 3:J="height:15px; font-size:12px; line-height:15px; overflow:hidden; background-color:#D8D8D8; color:#000000; font-weight:normal;";break;}return J;},css:function(J,I){if(I===1){if(x.id("_v_"+this._selectName).innerHTML!=J.innerHTML){J.style.cssText=this.style(I);}}else{if(x.id("_v_"+this._selectName).innerHTML!=J.innerHTML){J.style.cssText=this.style(I);}}}});});
